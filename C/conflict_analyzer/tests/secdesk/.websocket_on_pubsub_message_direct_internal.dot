digraph "CFG for 'websocket_on_pubsub_message_direct_internal' function" {
	label="CFG for 'websocket_on_pubsub_message_direct_internal' function";

	Node0x556851ef3280 [shape=record,label="{%2:\l  %3 = alloca %struct.fio_msg_s*, align 8\l  %4 = alloca i8, align 1\l  %5 = alloca %struct.fio_protocol_s*, align 8\l  %6 = alloca i64, align 8\l  %7 = alloca i64, align 8\l  %8 = alloca %struct.fio_str_s, align 8\l  store %struct.fio_msg_s* %0, %struct.fio_msg_s** %3, align 8\l  call void @llvm.dbg.declare(metadata %struct.fio_msg_s** %3, metadata !2814,\l... metadata !DIExpression()), !dbg !2815\l  store i8 %1, i8* %4, align 1\l  call void @llvm.dbg.declare(metadata i8* %4, metadata !2816, metadata\l... !DIExpression()), !dbg !2817\l  call void @llvm.dbg.declare(metadata %struct.fio_protocol_s** %5, metadata\l... !2818, metadata !DIExpression()), !dbg !2819\l  %9 = load %struct.fio_msg_s*, %struct.fio_msg_s** %3, align 8, !dbg !2820\l  %10 = getelementptr inbounds %struct.fio_msg_s, %struct.fio_msg_s* %9, i32\l... 0, i32 3, !dbg !2821\l  %11 = load i8*, i8** %10, align 8, !dbg !2821\l  %12 = ptrtoint i8* %11 to i64, !dbg !2822\l  %13 = call %struct.fio_protocol_s* @fio_protocol_try_lock(i64 %12, i32 1),\l... !dbg !2823\l  store %struct.fio_protocol_s* %13, %struct.fio_protocol_s** %5, align 8,\l... !dbg !2819\l  %14 = load %struct.fio_protocol_s*, %struct.fio_protocol_s** %5, align 8,\l... !dbg !2824\l  %15 = icmp ne %struct.fio_protocol_s* %14, null, !dbg !2824\l  br i1 %15, label %23, label %16, !dbg !2826\l|{<s0>T|<s1>F}}"];
	Node0x556851ef3280:s0 -> Node0x556851ef5ef0;
	Node0x556851ef3280:s1 -> Node0x556851ef5e00;
	Node0x556851ef5e00 [shape=record,label="{%16:\l16:                                               \l  %17 = call i32* @__errno_location() #10, !dbg !2827\l  %18 = load i32, i32* %17, align 4, !dbg !2827\l  %19 = icmp eq i32 %18, 9, !dbg !2830\l  br i1 %19, label %20, label %21, !dbg !2831\l|{<s0>T|<s1>F}}"];
	Node0x556851ef5e00:s0 -> Node0x556851ef5e50;
	Node0x556851ef5e00:s1 -> Node0x556851ef5ea0;
	Node0x556851ef5e50 [shape=record,label="{%20:\l20:                                               \l  br label %101, !dbg !2832\l}"];
	Node0x556851ef5e50 -> Node0x556851ef63f0;
	Node0x556851ef5ea0 [shape=record,label="{%21:\l21:                                               \l  %22 = load %struct.fio_msg_s*, %struct.fio_msg_s** %3, align 8, !dbg !2833\l  call void @fio_message_defer(%struct.fio_msg_s* %22), !dbg !2834\l  br label %101, !dbg !2835\l}"];
	Node0x556851ef5ea0 -> Node0x556851ef63f0;
	Node0x556851ef5ef0 [shape=record,label="{%23:\l23:                                               \l  call void @llvm.dbg.declare(metadata i64* %6, metadata !2836, metadata\l... !DIExpression()), !dbg !2837\l  store i64 0, i64* %6, align 8, !dbg !2837\l  call void @llvm.dbg.declare(metadata i64* %7, metadata !2838, metadata\l... !DIExpression()), !dbg !2839\l  store i64 0, i64* %7, align 8, !dbg !2839\l  %24 = load %struct.fio_protocol_s*, %struct.fio_protocol_s** %5, align 8,\l... !dbg !2840\l  %25 = bitcast %struct.fio_protocol_s* %24 to %struct.ws_s*, !dbg !2842\l  %26 = getelementptr inbounds %struct.ws_s, %struct.ws_s* %25, i32 0, i32 15,\l... !dbg !2842\l  %27 = load i8, i8* %26, align 1, !dbg !2842\l  %28 = icmp ne i8 %27, 0, !dbg !2843\l  br i1 %28, label %57, label %29, !dbg !2844\l|{<s0>T|<s1>F}}"];
	Node0x556851ef5ef0:s0 -> Node0x556851ef61c0;
	Node0x556851ef5ef0:s1 -> Node0x556851ef5f40;
	Node0x556851ef5f40 [shape=record,label="{%29:\l29:                                               \l  %30 = load i8, i8* %4, align 1, !dbg !2845\l  %31 = zext i8 %30 to i32, !dbg !2845\l  switch i32 %31, label %44 [\l    i32 0, label %32\l    i32 1, label %36\l    i32 2, label %40\l  ], !dbg !2847\l|{<s0>def|<s1>0|<s2>1|<s3>2}}"];
	Node0x556851ef5f40:s0 -> Node0x556851ef6080;
	Node0x556851ef5f40:s1 -> Node0x556851ef5f90;
	Node0x556851ef5f40:s2 -> Node0x556851ef5fe0;
	Node0x556851ef5f40:s3 -> Node0x556851ef6030;
	Node0x556851ef5f90 [shape=record,label="{%32:\l32:                                               \l  %33 = load %struct.fio_msg_s*, %struct.fio_msg_s** %3, align 8, !dbg !2848\l  %34 = call i8* @fio_message_metadata(%struct.fio_msg_s* %33, i64 -34), !dbg\l... !2850\l  %35 = ptrtoint i8* %34 to i64, !dbg !2851\l  store i64 %35, i64* %7, align 8, !dbg !2852\l  br label %45, !dbg !2853\l}"];
	Node0x556851ef5f90 -> Node0x556851ef60d0;
	Node0x556851ef5fe0 [shape=record,label="{%36:\l36:                                               \l  %37 = load %struct.fio_msg_s*, %struct.fio_msg_s** %3, align 8, !dbg !2854\l  %38 = call i8* @fio_message_metadata(%struct.fio_msg_s* %37, i64 -33), !dbg\l... !2855\l  %39 = ptrtoint i8* %38 to i64, !dbg !2856\l  store i64 %39, i64* %7, align 8, !dbg !2857\l  br label %45, !dbg !2858\l}"];
	Node0x556851ef5fe0 -> Node0x556851ef60d0;
	Node0x556851ef6030 [shape=record,label="{%40:\l40:                                               \l  %41 = load %struct.fio_msg_s*, %struct.fio_msg_s** %3, align 8, !dbg !2859\l  %42 = call i8* @fio_message_metadata(%struct.fio_msg_s* %41, i64 -32), !dbg\l... !2860\l  %43 = ptrtoint i8* %42 to i64, !dbg !2861\l  store i64 %43, i64* %7, align 8, !dbg !2862\l  br label %45, !dbg !2863\l}"];
	Node0x556851ef6030 -> Node0x556851ef60d0;
	Node0x556851ef6080 [shape=record,label="{%44:\l44:                                               \l  br label %45, !dbg !2864\l}"];
	Node0x556851ef6080 -> Node0x556851ef60d0;
	Node0x556851ef60d0 [shape=record,label="{%45:\l45:                                               \l  %46 = load i64, i64* %7, align 8, !dbg !2865\l  %47 = icmp ne i64 %46, 0, !dbg !2865\l  br i1 %47, label %48, label %56, !dbg !2867\l|{<s0>T|<s1>F}}"];
	Node0x556851ef60d0:s0 -> Node0x556851ef6120;
	Node0x556851ef60d0:s1 -> Node0x556851ef6170;
	Node0x556851ef6120 [shape=record,label="{%48:\l48:                                               \l  %49 = load %struct.fio_msg_s*, %struct.fio_msg_s** %3, align 8, !dbg !2868\l  %50 = getelementptr inbounds %struct.fio_msg_s, %struct.fio_msg_s* %49, i32\l... 0, i32 3, !dbg !2870\l  %51 = load i8*, i8** %50, align 8, !dbg !2870\l  %52 = ptrtoint i8* %51 to i64, !dbg !2871\l  %53 = load i64, i64* %7, align 8, !dbg !2872\l  %54 = call i64 @fiobj_dup.1896(i64 %53), !dbg !2873\l  %55 = call i64 @fiobj_send_free.1897(i64 %52, i64 %54), !dbg !2874\l  br label %99, !dbg !2875\l}"];
	Node0x556851ef6120 -> Node0x556851ef63a0;
	Node0x556851ef6170 [shape=record,label="{%56:\l56:                                               \l  br label %57, !dbg !2876\l}"];
	Node0x556851ef6170 -> Node0x556851ef61c0;
	Node0x556851ef61c0 [shape=record,label="{%57:\l57:                                               \l  %58 = load i8, i8* %4, align 1, !dbg !2877\l  %59 = zext i8 %58 to i32, !dbg !2877\l  %60 = icmp eq i32 %59, 2, !dbg !2879\l  br i1 %60, label %61, label %88, !dbg !2880\l|{<s0>T|<s1>F}}"];
	Node0x556851ef61c0:s0 -> Node0x556851ef6210;
	Node0x556851ef61c0:s1 -> Node0x556851ef6350;
	Node0x556851ef6210 [shape=record,label="{%61:\l61:                                               \l  call void @llvm.dbg.declare(metadata %struct.fio_str_s* %8, metadata !2881,\l... metadata !DIExpression()), !dbg !2883\l  %62 = getelementptr inbounds %struct.fio_str_s, %struct.fio_str_s* %8, i32\l... 0, i32 0, !dbg !2884\l  store volatile i32 0, i32* %62, align 8, !dbg !2884\l  %63 = getelementptr inbounds %struct.fio_str_s, %struct.fio_str_s* %8, i32\l... 0, i32 1, !dbg !2884\l  store i8 0, i8* %63, align 4, !dbg !2884\l  %64 = getelementptr inbounds %struct.fio_str_s, %struct.fio_str_s* %8, i32\l... 0, i32 2, !dbg !2884\l  store i8 0, i8* %64, align 1, !dbg !2884\l  %65 = getelementptr inbounds %struct.fio_str_s, %struct.fio_str_s* %8, i32\l... 0, i32 3, !dbg !2884\l  %66 = bitcast [10 x i8]* %65 to i8*, !dbg !2884\l  call void @llvm.memset.p0i8.i64(i8* align 2 %66, i8 0, i64 10, i1 false),\l... !dbg !2884\l  %67 = getelementptr inbounds %struct.fio_str_s, %struct.fio_str_s* %8, i32\l... 0, i32 4, !dbg !2884\l  store i64 0, i64* %67, align 8, !dbg !2884\l  %68 = getelementptr inbounds %struct.fio_str_s, %struct.fio_str_s* %8, i32\l... 0, i32 5, !dbg !2884\l  %69 = load %struct.fio_msg_s*, %struct.fio_msg_s** %3, align 8, !dbg !2884\l  %70 = getelementptr inbounds %struct.fio_msg_s, %struct.fio_msg_s* %69, i32\l... 0, i32 2, !dbg !2884\l  %71 = getelementptr inbounds %struct.fio_str_info_s, %struct.fio_str_info_s*\l... %70, i32 0, i32 1, !dbg !2884\l  %72 = load i64, i64* %71, align 8, !dbg !2884\l  store i64 %72, i64* %68, align 8, !dbg !2884\l  %73 = getelementptr inbounds %struct.fio_str_s, %struct.fio_str_s* %8, i32\l... 0, i32 6, !dbg !2884\l  store void (i8*)* null, void (i8*)** %73, align 8, !dbg !2884\l  %74 = getelementptr inbounds %struct.fio_str_s, %struct.fio_str_s* %8, i32\l... 0, i32 7, !dbg !2884\l  %75 = load %struct.fio_msg_s*, %struct.fio_msg_s** %3, align 8, !dbg !2884\l  %76 = getelementptr inbounds %struct.fio_msg_s, %struct.fio_msg_s* %75, i32\l... 0, i32 2, !dbg !2884\l  %77 = getelementptr inbounds %struct.fio_str_info_s, %struct.fio_str_info_s*\l... %76, i32 0, i32 2, !dbg !2884\l  %78 = load i8*, i8** %77, align 8, !dbg !2884\l  store i8* %78, i8** %74, align 8, !dbg !2884\l  %79 = getelementptr inbounds %struct.fio_str_s, %struct.fio_str_s* %8, i32\l... 0, i32 5, !dbg !2885\l  %80 = load i64, i64* %79, align 8, !dbg !2885\l  %81 = icmp uge i64 %80, 32768, !dbg !2886\l  br i1 %81, label %82, label %83, !dbg !2887\l|{<s0>T|<s1>F}}"];
	Node0x556851ef6210:s0 -> Node0x556851ef6260;
	Node0x556851ef6210:s1 -> Node0x556851ef62b0;
	Node0x556851ef6260 [shape=record,label="{%82:\l82:                                               \l  br label %85, !dbg !2887\l}"];
	Node0x556851ef6260 -> Node0x556851ef6300;
	Node0x556851ef62b0 [shape=record,label="{%83:\l83:                                               \l  %84 = call i64 @fio_str_utf8_valid(%struct.fio_str_s* %8), !dbg !2888\l  br label %85, !dbg !2887\l}"];
	Node0x556851ef62b0 -> Node0x556851ef6300;
	Node0x556851ef6300 [shape=record,label="{%85:\l85:                                               \l  %86 = phi i64 [ 0, %82 ], [ %84, %83 ], !dbg !2887\l  %87 = trunc i64 %86 to i8, !dbg !2889\l  store i8 %87, i8* %4, align 1, !dbg !2890\l  br label %88, !dbg !2891\l}"];
	Node0x556851ef6300 -> Node0x556851ef6350;
	Node0x556851ef6350 [shape=record,label="{%88:\l88:                                               \l  %89 = load %struct.fio_protocol_s*, %struct.fio_protocol_s** %5, align 8,\l... !dbg !2892\l  %90 = bitcast %struct.fio_protocol_s* %89 to %struct.ws_s*, !dbg !2893\l  %91 = load %struct.fio_msg_s*, %struct.fio_msg_s** %3, align 8, !dbg !2894\l  %92 = getelementptr inbounds %struct.fio_msg_s, %struct.fio_msg_s* %91, i32\l... 0, i32 2, !dbg !2895\l  %93 = load i8, i8* %4, align 1, !dbg !2896\l  %94 = zext i8 %93 to i32, !dbg !2896\l  %95 = and i32 %94, 1, !dbg !2897\l  %96 = trunc i32 %95 to i8, !dbg !2896\l  %97 = call i32 @websocket_write(%struct.ws_s* %90, %struct.fio_str_info_s*\l... byval(%struct.fio_str_info_s) align 8 %92, i8 zeroext %96), !dbg !2898\l  %98 = load i64, i64* %6, align 8, !dbg !2899\l  call void @fiobj_free.1871(i64 %98), !dbg !2900\l  br label %99, !dbg !2900\l}"];
	Node0x556851ef6350 -> Node0x556851ef63a0;
	Node0x556851ef63a0 [shape=record,label="{%99:\l99:                                               \l  call void @llvm.dbg.label(metadata !2901), !dbg !2902\l  %100 = load %struct.fio_protocol_s*, %struct.fio_protocol_s** %5, align 8,\l... !dbg !2903\l  call void @fio_protocol_unlock(%struct.fio_protocol_s* %100, i32 1), !dbg\l... !2904\l  br label %101, !dbg !2905\l}"];
	Node0x556851ef63a0 -> Node0x556851ef63f0;
	Node0x556851ef63f0 [shape=record,label="{%101:\l101:                                              \l  ret void, !dbg !2905\l}"];
}
